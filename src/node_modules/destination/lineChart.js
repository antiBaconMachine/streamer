'use strict';

const c3 = require('c3'),
      stream = require('stream');

module.exports = function(delay) {

    const el = document.createElement('div');
    el.className = 'chart lineChart';
    let chart;

    const dest = stream.Writable();
    dest._write = function(c, enc, cb) {
        chart.flow({
            to: 0,
            duration: 25,
            columns: [
                ['data', parseInt(c.toString())]
            ]
        });
        cb();
    };

    dest.el = el;

    dest.render = function() {
        chart = c3.generate({
            bindto: el,
            data: {
                columns: [
                    ['data']
                ]
            }
        });
    };

    return dest;
};
